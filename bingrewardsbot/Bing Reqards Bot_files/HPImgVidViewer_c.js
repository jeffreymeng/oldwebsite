var VM=new function(){function ft(n){n&&(n.style.display="block",n.tabIndex="0")}function a(n){n&&(n.style.display="none",n.tabIndex="-1")}function o(){ft(f),a(h)}function v(){a(f),ft(h)}function tt(n){if(_w.B_er)throw n;}function l(){try{n&&n.play&&n.play()}catch(t){tt(t)}}function y(){try{n&&n.pause&&n.pause()}catch(t){tt(t)}}function ht(){o(),y()}function ct(){t===!0&&(v(),l())}function nt(n){var t=n?sj_be:sj_ue;st?(w(),t(_d,r,w),t(_w,"unload",ot)):(t(_w,"blur",ht),t(_w,"focus",ct))}function w(){_d[s]?n.pause():t===!0&&l()}function ot(){sj_ue(_d,r,w)}var it="hidden",c="Hidden",b="visibilitychange",rt="canplaythrough",p="undefined",k="ms",g="webkit",n,f=_ge("sh_pl"),h=_ge("sh_ps"),u,ut,s,r,t,i,e;this.Loaded=!1,this.InFoc=1,t=!0,this._autoPlay=!0;var d="hpVideoPause",et=!1,st=function(){if(typeof _d[it]!==p)s=it,r=b;else if(typeof _d[k+c]!==p)s=k+c,r=k+b;else if(typeof _d[g+c]!==p)s=g+c,r=g+b;else return!1;return!0}();f&&(i=f.parentNode,e=h.parentNode,sj_be(i,"click",function(){e.focus(),VM.playAction()}),sj_be(i,"keydown",function(n){if(n.which==13||n.keyCode==13)return e.focus(),VM.playAction(),!1}),sj_be(e,"click",function(){i.focus(),VM.pauseAction()}),sj_be(e,"keydown",function(n){if(n.which==13||n.keyCode==13)return i.focus(),VM.pauseAction(),!1})),this.hideControls=function(){a(f),a(h),nt(!1)},this.end=function(){o()},this.playAction=function(){this.play(),_w.g_hpLocal&&localStorage.removeItem(d)},this.pauseAction=function(){this.pause(),_w.g_hpLocal&&localStorage.setItemE(d,1,1440)},this.play=function(){v(),l(),t=!0},this.pause=function(){o(),y(),t=!1},this.fade=function(){!VM.Loaded&&VM.InFoc&&(VM._autoPlay?(l(),v()):(y(),o()),_anim.fadeE(n).up(),VM.Loaded=!0),_w.g_NPLE&&!--_w.g_NPLE&&sj_evt.fire("onRBComplete")},this.sa_vid_ld=function(i){var f,s,h,c,r,o,e;if(n=_ge("vid"),!VM.Loaded&&_w.g_vid&&n&&n.play){for(f=_w.g_vid,sj_be(n,rt,function l(){nt(!0),i?i():VM.fade(),u&&!et&&(ut=sb_gt()-u,_w.hp_llog&&hp_llog("Video",ut),et=!0),sj_ue(n,rt,l)}),r=0;r<f.length;r++)if(!!(n.canPlayType&&n.canPlayType(f[r][1]).match(/^(probably|maybe)$/i))){h=f[r][1],s=f[r][2],u=sb_gt();break}if(c=_w.g_img.hdon&&_w.g_img.hdsup,c)for(r=0;r<f.length;r++)if(f[r][0]=="mp4hd"){h=f[r][1],s=f[r][2];break}if(u)n.type=h,n.src=s,_H.startTm&&!i&&_w.hp_llog&&hp_llog("VideoStart",u-_H.startTm);else return;sj_so(n,0),VM._autoPlay=!0,_w.g_hpLocal&&(o=localStorage.getItemE(d),o!=null&&o===1&&(VM._autoPlay=!1,t=!1)),e=sj_cook&&sj_cook.get("SRCHHPGUSR","HAP"),e&&e!="0"&&(VM._autoPlay=!1,t=!1)}}},ImgViewer;sj_evt.bind("onBgSet",function(){VM.Loaded===!1&&VM.sa_vid_ld()},1),ImgViewer=function(){function su(){var n=_ge("sh_rdiv");n&&(sj_be(n,l,function(){hp_addclass(n,pi)}),sj_be(n,cr,function(){hp_removeclass(n,pi)}))}function fu(){var n=_ge("hp_cellCenter");return n&&n.className.indexOf("hp_hd")!=-1&&typeof g_img!==o&&hp_defined(g_img.hdurl)&&g_img.url==g_img.hdurl?!0:!1}function lr(n,t,i){var r=sj_gx(),u=hp_pushparams(["format=js","idx="+n,"n="+t,"nc="+sb_gt(),"pid=hp"]),e;_w.g_vidOn&&u.push("video=1"),_H.quiz&&u.push("quiz=1"),_H.favs&&u.push("fav=1"),e="/HPImageArchive.aspx?"+u.join("&"),r.open("GET",e,!0),sj_be(r,"readystatechange",function(){r.readyState==4&&r.status==200&&(f=iu(r.responseText),lt=Math.min(ci,n+(f&&f.images&&f.images.length)||0),i(!!f))}),r.send(null)}function iu(n){if(typeof n!="string"||!n)return null;if(_w.JSON&&_w.JSON.parse)try{return _w.JSON.parse(n)}catch(t){}try{return new Function("return "+n)()}catch(t){return null}}function tu(){for(var n=0,t=f.images.length;n<t;n++)kt(n,n)}function kt(n,i){var u;if(t[n]=f.images[i]||null,dr){var e=Math.max(screen.height,screen.width),o=Math.min(screen.height,screen.width),r="//"+window.location.host+"/iod/";t[n].url=r+e+"/"+o+"/"+t[n].fullstartdate,t[n].portraiturl=r+o+"/"+e+"/"+t[n].fullstartdate}else hu&&(u="_1920x1080.jpg",t[n].url=t[n].urlbase+u);f.quiz&&(t[n].quiz=f.quiz),f.fav&&(t[n].fav=f.fav)}function di(i){var r=n+1;ct[r]||r>=ci?tt():t[r]?wi(r):lr(r,1,function(n){n?(kt(r,0),wi(r)):tt(),typeof i=="function"&&i(n)})}function ru(){var n=g_prefetch;n&&(n.Im&&wu(n.Im),n.Vid&&pu(n.Vid))}function wu(n){var t=new Image;t.onload=function(){var t=sj_cook.get("_SS","bIm");t=t&&t.length>=3?t.substring(t.length-3)+n.hash:n.hash,sj_cook.set("_SS","bIm",t,0,"/")},t.src=n[it]}function pu(n){var t=sj_ce("video","prefVid"),i,u,r;try{t.setAttribute("preload","auto")}catch(f){}for(t.width=956,t.height=512,i=0,u=n.length;i<u;i++)r=sj_ce("source"),r.src=n[i][2],r.type=n[i][1],t.appendChild(r);t.style.display="none",sj_b.appendChild(t),sj_be(t,"canplaythrough",function(){var n=_ge("prefVid");n&&sj_b.removeChild(n)})}function wi(n){if(!ct[n]){tt();var i=t[n],r=new Image;r.onload=function(){sj_evt.fire("onHPIVImg"+n,n),ct[n]=1},r.src=i.pano?i.pano.image:_w.g_vidOn&&i.vid?i.vid.image:i[it]}}function ku(){var i=_ge("audioElm"),t,n;i&&i.pause(),t=_ge("audioMain"),t&&(t.style.display=v),n=_ge("hp_audio_info"),n&&(n.style.display=v)}function pt(t){n==0||w||(n--,oi=1,nr(),bi(1,n)),typeof t!==o&&t&&sj_pd(t)}function vt(t){if(n<lt-1&&!w&&!li){var i=n+1;oi=1,li=1,ct[i]||cu(),sj_evt.bind("onHPIVImg"+i,yu,1),bi(-1,i)}typeof t!==o&&t&&sj_pd(t)}function yu(t){t[1]==n+1&&(n++,li=0,nr())}function tt(){var r=t[n],f=r[fr]=="1"?ft:et,s,e,a,l;r.vid&&(s=r.vid.dark,_ge("sh_pl").parentNode.className=s?"sh_pll":"sh_pld",_ge("sh_ps").parentNode.className=s?"sh_psl":"sh_psd",f=s?ft:et),e=f+"dis",c&&(c.className=f,a=c.href===ut?ui:yt,c.style.cursor=a),n===lt-1?(i.firstChild.className=e,hp_disable(i)):(i.firstChild.className=f,hp_enable(i)),n==0?(u.firstChild.className=e,hp_disable(u)):(u.firstChild.className=f,hp_enable(u)),i.title=b.previous,u.title=b.next,l=oi?"nav":"",sj_evt.fire("updateHpImg",r,l),h&&typeof hpWall!==o&&(r.wp&&!r.vid?(hpWall.enabled=!0,hpWall.hash=r.hsh,h.firstChild.className=f,h.title=b.walls,h.style.cursor=yt):(hpWall.hash="",hpWall.enabled=!1,hpWall.tB(0),h.firstChild.className=e,h.title=b.walle,h.style.cursor=ui))}function cu(){i.title=b.loading}function nr(){var u,i,t;if(w=1,ei&&clearTimeout(ei),di(),p&&p.disable(),u=_ge("vid"),_w.g_vidOn&&(VM.InFoc=0,u&&u.style.opacity!="0"&&(u.onended=null,VM.hideControls())),_ge("sh_iga")&&ku(),r&&r.style.opacity!="0"){_ge("panoControls").style.visibility=or,e.style.backgroundImage="url()",i=_ge("sh_pps"),t=_ge("sh_ppl"),i&&t&&(i.style.display=v,i.tabIndex="-1",t.style.display=v,t.tabIndex="-1"),st.down(function(){e.removeChild(r),st=r=null,hi[n]||tr()});return}hi[n]?w=0:wt.down(tr)}function tr(){var f;e.style.display=v;var i=t[n],r=_ge("vid"),o=_ge("sc_mktb"),s=t[n].fullstartdate,h=s.substr(0,8)+"_"+s.substr(8,4),u;if(r&&_w.g_vidOn&&VM&&(r.pause&&!r.paused&&r.pause(),r.style.display="none",sj_so(r,0),VM.Loaded=!1,_w.g_vid=null,i.vid)){if(ri(i.vid.caption,i.copyrightlink),u="url('"+i.vid.image+"')",e.style.backgroundImage=u,e.style.display=ir,i.vid.loop){r.onended=VM.play;try{r.setAttribute("loop","true")}catch(c){}}else{r.onended=VM.end;try{r.removeAttribute("loop")}catch(c){}}_w.g_vid=i.vid.sources,VM.InFoc=1,VM.sa_vid_ld(vu),wt.up(gi)}i.pano&&fi(i.pano,!1),i.vid||(ri(i.copyright,i.copyrightlink),u=i[it],i.pano&&(u=i.pano.image),u="url('"+u+"')",e.style.backgroundImage=u,e.style.filter=sb_i8l?"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i[it]+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity=0);":"",e.style.display=ir,wt.up(gi)),sj_evt.fire("onHPImgViewerNavigation",h),sj_evt.fire("CurImageIdx",n),o&&(f=_ge("hp_husb"),o.style.display=!!f||i.vid||i.pano?"none":"block")}function ri(n,t){var i=typeof t==o||t==""||t==ut,r=_ge("musCard");c&&(r?c.href=ut:(c.title=n,c.href=i?ut:t,c.style.cursor=i?ui:yt))}function vu(){var n=_ge("vid");n&&VM&&VM.InFoc&&(VM._autoPlay===!1?VM.pause():VM.play(),VM.Loaded=!0,n.style.display="block",sj_so(n,100))}function gi(){var e,s,v,r,a,h,l,y,i,f,u,c;if(w=0,e=t[n],_w.g_hot&&(!e.pano||e.pano.hs===!0)){for(s=e.hs,i=0,c=s.length;i<c;i++){if(i>=s.length){typeof g_triggerElems!==o&&(g_triggerElems[i].isHotSpotDisabled=!0);continue}else typeof g_triggerElems!==o&&(g_triggerElems[i].isHotSpotDisabled=!1);v=i+1,r=s[i],a=_ge("sc_hst"+v),a.style.left=r.locx+"%",a.style.top=r.locy+"%",h=_ge("sc_hs"+v),h.href=r.link,h.firstChild.innerHTML=r.desc,h.firstChild.nextSibling.innerHTML=r.query}p&&p.intro(1)}var d=_ge("hp_pgNav"),k=d?2:0,b=_ge("hp_pgbar");if(b)for(l=b.getElementsByTagName("h3"),y=e.msg,i=0,c=l.length;i<c;i++){if(f=y[i],!f)break;if(u=l[i+k],!u)break;u.parentNode.id!==eu&&(u.innerHTML=f.title,u.nextSibling.innerHTML=f.text,u.nextSibling.href=f.link)}}function bi(n){if(typeof hpl!==o){if(hpl&&(y=hpl),y&&y.ssd){var i=y.ssd,r=new Date(parseInt(i.substr(0,4),10),i.substr(4,2)-1,parseInt(i.substr(6,2),10)+n);y.ssd=r.getFullYear().toString()+ki(r.getMonth()+1)+ki(r.getDate())+"_"+i.substr(9,4)}y&&(hpl=y)}}function ki(n){return(n<10?"0":"")+n}function au(n){var i,u,t;if(ri(n.cap,n.caplink),n.spots)for(i=0,u=n.spots.length;i<u;i++)t=n.spots[i],Pano.CreateHotspot(t[0],t[1],t[2]);w=1,r.style.opacity=0,e.style.opacity=1,r.style.visibility=nt,st.up(function(){var i,t,f,e,r,u;_ge("panoControls").style.visibility=nt,i="hpVideoPause",sj_evt.bind(ar,function(){Pano.StopAnimation()}),t=!0,n.an===!0&&(f=sj_cook&&sj_cook.get("SRCHHPGUSR","HAP"),f&&f!="0"&&(t=!1),_w.g_hpLocal&&(e=localStorage.getItemE(i),e!=null&&e===1&&(t=!1)),t?ei=sb_st(function(){Pano.IdleAnimate()},500):Pano.StopAnimation()),r=_ge("panoPause"),u=_ge("panoPlay"),r&&u&&(sj_be(r,l,function(){_w.g_hpLocal&&localStorage.setItemE(i,1,1440),Pano.StopAnimation()}),sj_be(u,l,function(){_w.g_hpLocal&&localStorage.removeItem(i),Pano.IdleAnimate(!0)})),w=0})}function s(n){return sj_ce(uu,n)}function br(){var a,u,h,c,f,nt,n,o;if(_ge("panoDiv")||(r=s("panoDiv"),e.appendChild(r),st=_anim.fadeE(r,ai)),a=_ge("hp_ctrls"),a&&!_ge("panoControls")){var v=s("panoLeft"),p=s("panoRight"),y=s("panoUp"),b=s("panoDown"),k=s("panoZoomIn"),w=s("panoZoomOut"),i=s("panoPosition");i.appendChild(y),i.appendChild(v),i.appendChild(p),i.appendChild(b),u=s("panoControlSet"),u.appendChild(w),u.appendChild(i),u.appendChild(k),h=s("panoControls"),h.appendChild(u),c=[v,p,y,b,k,w];function t(n,t){Pano.SetCameraFidelity(!1),si=!1,g(n,t)}function g(n,t){si==!1?(Pano.MovePano(n,t),sb_st(sj_wf(g,n,t),25)):Pano.SetCameraFidelity(!0)}function d(n){si=!0;var t=sj_et(n);r&&t.id!="sh_ppl"&&t.id!="sh_pps"&&Pano.StopAnimation()}for(f=0,nt=c.length;f<nt;f++)sj_be(c[f],hr,d);sj_be(_d,hr,d),sj_be(k,l,sj_wf(t,"z",1)),sj_be(w,l,sj_wf(t,"z",-1)),sj_be(_w,wr,function(){r&&Pano.StopAnimation()}),n=.05,o=_G&&_G.RTL===!0,sj_be(v,l,sj_wf(t,"x",o?-n:n)),sj_be(p,l,sj_wf(t,"x",o?n:-n)),sj_be(y,l,sj_wf(t,"y",n)),sj_be(b,l,sj_wf(t,"y",-n)),sj_be(_w,"blur",function(){r&&Pano.StopAnimation()}),a.appendChild(h)}}function fi(n,t){function i(){br(),n.hs===!1&&p&&p.disable();var u=_w.location.search.indexOf("debug=1")!=-1,i="?h="+_w.location.host,t=sb_gt();Pano.InitializePano(n.url,r,function(){au(n),_w.hp_llog&&hp_llog("Pano",sb_gt()-t)},u,n.pos,n.maxfov,i),sj_evt.fire("onPanoComplete")}_H.startTm&&t&&_w.hp_llog&&hp_llog("PanoStart",sb_gt()-_H.startTm),typeof Pano===o?(sj_evt.bind("onPanoLoad",function(){i()}),sj_jb("HomepagePano_c"),sj_be(_w,"resize",function(){r&&typeof Pano!==o&&typeof Pano.SetViewportSize===lu&&Pano.SetViewportSize(r.offsetWidth,r.offsetHeight)})):i()}function pr(){ii(k)}function ii(n){sj_evt&&sj_evt.fire(ar,n)}function kr(){var o="DHPImpression",e="data-maximpression",f=_ge("dhp"),t,r,i,n,u;if(f&&f.hasAttribute(e)&&(t=parseInt(f.getAttribute(e)),_w.localStorage&&!isNaN(t)))try{if(r=localStorage.getItem(o),i=r!=null?parseInt(r):0,i<t)localStorage.setItem(o,i+1);else return!0}catch(s){HPL_er(s,"checkDHPCookie")}return(n=sj_cook&&sj_cook.get("_UR","D"),u=sj_cook&&sj_cook.get("_UR","DHP"),n&&n!="0"&&n!="1"||u&&u!="0")?!0:!1}function nu(){var t="isHomepage",i="http://"+_d.domain+"/",r=i.replace(/www\./i,""),n=yr();return n?vi(n,t,i)||vi(n,t,r):0}function vi(n,t,i){try{return n[t](i)}catch(r){return 0}}function yr(){var n=_ge("dhp_detect");return n||(n=sj_ce("span","dhp_detect"),n.style.behavior="url(#default#homepage)",sj_b.appendChild(n)),n}function yi(){if(kr()||nu())a&&(a.style.display=v),dt&&(dt.style.display=v);else if(ot&&a&&a.style.display!=v){var n=a.offsetLeft;(!rt||rt&&rt.clientWidth<ur)&&(n-=ur),a.style.visibility=n<ot.offsetLeft+ot.clientWidth?or:nt}}function rr(){lr(0,vr,function(r){function e(n){sb_st(sj_wf(di,n),1),sj_ue(i,at,e),sj_ue(u,at,e),sj_ue(i,k,e),sj_ue(u,k,e)}var o,a,l,s,v,c;if(r){if(n=0,ni!=null)for(tu(),o=0;o<lt;o++)t[o].fullstartdate==ni&&(n=o);else kt(0,0);b=b||f.tooltips,sj_be(i,g,vt),sj_be(u,g,pt),i.firstChild.style.visibility=nt,u.firstChild.style.visibility=nt,a=_ge("sh_pl"),l=_ge("sh_ps"),tt(),i.firstChild.className=t[n][fr]=="1"?ft:et,hp_enable(i),t[n].pano?fi(t[n].pano,!0):t[n].vid&&(s=t[n].vid.dark,a.parentNode.className=s?"sh_pll":"sh_pld",l.parentNode.className=s?"sh_psl":"sh_psd",i.firstChild.className=s?ft:et),v=function(i){sj_pd(i),n==0&&t&&t.length==1?e(sj_wf(vt,i)):vt(i)},c=function(i){sj_pd(i),n==0&&t&&t.length==1?e(sj_wf(pt,i)):pt(i)},ou&&(sj_be(i,sr,v),sj_be(u,sr,c)),sj_be(i,at,e),sj_be(u,at,e),sj_be(i,k,e),sj_be(u,k,e),h&&hpWall&&(_G.Mkt=="zh-CN"?sj_be(h,g,hpWall.dLFree):sj_be(h,g,hpWall.dL))}})}var yt="pointer",ui="default",o="undefined",lu="function",nt="visible",or="hidden",eu="hp_pgps",k="focus",g="click",cr="keydown",l="mousedown",hr="mouseup",at="mouseover",wr="mousewheel",sr="touchstart",ar="hpsbact",uu="div",bu="dhplink",ir="block",v="none",ci=8,ai=500,lt=0,n=0,li=0,y=null,oi=0,t=[],ct=[],hi=[],p,it="url",fr="bot",e=_ge("bgDiv"),dr=_ge("bgDivPortrait"),i=_ge("sh_igl"),u=_ge("sh_igr"),h=_ge("sh_igw"),w=0,c=_ge("sh_cp"),ft="sc_light",et="sc_dark",pi="no_outline",ut="javascript:void(0)",f=null,si=!0,ou="ontouchstart"in _w,r=null,ei=null,d=_ge("sb_form_q"),er=d&&d.parentNode,b,wt=_anim.fadeE(e,ai),st,ot=_ge("sc_hdu"),a=_ge("dhp"),dt=_ge("dhplink"),rt=_ge("id_h"),ur=300,hu=fu(),ti,bt,ht;if(i&&u&&(_w.hp_overrideImg=function(n,t){hi[n]=t},su(),_w.hpPanoLoad=function(n){fi(n,!0)},!_w.g_IMVL)){typeof _w.g_IMVL!==o&&(_w.g_IMVL=1),sj_evt.bind("onHPHS",function(n){p=n[1]},1),d&&(sj_be(d,k,pr),sj_be(d,cr,ii),er&&sj_be(er,g,ii)),ot&&(a||dt)&&rt&&(sj_evt.bind(bu,yi,1),sj_be(_w,"resize",yi,!1));var gr=new RegExp("[\\?&]ssd=([^&#]*)"),gt=gr.exec(_w.location.href),vr=1,ni;if(gt!=null&&gt[1]!=null&&(ni=gt[1].replace("_",""),vr=ci),ti=!0,_w.QuickSettings)for(bt=_w.QuickSettings.getActiveSettings(),ht=0;ht<bt.length;++ht)bt[ht].name==="DisableIOTD"&&(ti=!1);ti?(rr(),sj_evt.bind("onRBComplete",function(){var n=_w.sched;_w.g_hptse&&n&&n.schedule({ns:"H",task:function(){n.complete("H")}}),ru()},1)):_H.initIV=rr}},sj_evt.bind("onBgSet",ImgViewer,1)